@model Beacon.Models.User
@{
    ViewData["Title"] = "Profile";

    string Capitalize(string? value)
    {
        if (string.IsNullOrWhiteSpace(value)) return "";
        return char.ToUpper(value[0]) + value.Substring(1).ToLower();
    }

    var firstName = Capitalize(Model.FirstName);
    var lastName = Capitalize(Model.LastName);
    var userName = $"{firstName} {lastName}".Trim();
    if (string.IsNullOrWhiteSpace(userName)) userName = "N/A";

    var userEmail = Model.Email ?? "N/A";
    var userDOB = Model.DateOfBirth.HasValue ? Model.DateOfBirth.Value.ToString("yyyy-MM-dd") : "N/A";
    var userGender = !string.IsNullOrEmpty(Model.Gender) ? Model.Gender : "N/A";
    var userAddress = !string.IsNullOrEmpty(Model.Address) ? Model.Address : "N/A";
}

<div class="profile-container">
    <div class="profile-card">
        <div class="profile-left">
            <div class="profile-pic-wrapper">
                <img id="profilePreview" src="~/images/profile.jpg" alt="Profile" class="profile-pic" />
            </div>

            <div class="file-input-container">
                <label for="profileImageInput" class="file-btn">Choose Image</label>
                <input type="file" id="profileImageInput" accept="image/*" />
            </div>
        </div>

        <div class="profile-right">
            <h2 class="headline">@userName</h2>

            <div class="details">
                <p><strong>Date of Birth</strong> : @userDOB</p>
                <p><strong>Gender</strong> : @userGender</p>
                <p><strong>Address</strong> : @userAddress</p>
                <p><strong>Email</strong> : @userEmail</p>
            </div>

            <div class="btn-group">
                <a href="/Home" class="nav-btn">Home</a>
                <a href="/Posts" class="nav-btn">My Posts</a>
                <a href="/Account/EditProfile" class="nav-btn edit">Edit Profile</a>
            </div>
        </div>
    </div>
</div>

<footer></footer>

@section Scripts {
    <script>
        const input = document.getElementById('profileImageInput');
        const preview = document.getElementById('profilePreview');

        input.addEventListener('change', function () {
            const file = this.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    preview.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
}

<style>
    body { 
        min-height:100vh; display:flex; flex-direction:column; margin:0;
        font-family:'Segoe UI', sans-serif; background:#fafafa;
    }

    .profile-container { 
        flex:1; display:flex; justify-content:center; align-items:flex-start; 
        padding:80px 40px 40px;
    }

    .profile-card { 
        background:#fff; display:flex; border-radius:12px; 
        box-shadow:0 8px 25px rgba(0,0,0,0.12); max-width:900px; width:100%; 
        overflow:hidden; 
    }

    .profile-left { 
        flex:1; display:flex; flex-direction:column; justify-content:center; align-items:center; 
        background:#f4f4f4; padding:40px 20px; margin-top: -20px;
    }

    .profile-pic-wrapper {
        width: 220px;
        height: 220px;
        border-radius: 50%;
        overflow: hidden;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        margin-bottom: 15px;
    }

    .profile-pic {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        transition: transform 0.3s ease;
    }

    .file-input-container {
        text-align: center;
        margin-top: 10px;
    }

    #profileImageInput {
        display: none;
    }

    .file-btn {
        background: #6c63ff;
        color: #fff;
        padding: 10px 20px;
        border-radius: 25px;
        cursor: pointer;
        font-weight: 600;
        transition: 0.3s;
    }

    .file-btn:hover {
        background: #4a47c6;
    }

    .profile-right { flex:2; padding:30px 40px; }

    .headline { 
        font-size:28px; font-weight:700; color:#6c63ff; 
        margin-bottom:20px; letter-spacing:1px;
    }

    .details p { margin:10px 0; color:#333; font-size:15px; }

    .btn-group { margin-top:50px; }

    .nav-btn { 
        background:#6c63ff; color:#fff; padding:10px 18px; 
        border-radius:6px; text-decoration:none; margin-right:15px;
        transition:0.3s;
    }

    .nav-btn:hover { background:#4a47c6; }
    .nav-btn.edit { background:#28a745; }
    .nav-btn.edit:hover { background:#1e7e34; }

    footer { 
        margin-top:auto; padding:15px 0; background:#f8f9fa; 
        text-align:center; color:#555; border-top:1px solid #ddd;
    }
</style>
